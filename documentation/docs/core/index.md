# Core System

ACE is composed of subsystem component interfaces. Each interface allows implementation of a particular part of the system. An implementation of all of these interfaces would create a complete ACE **core system**.

## System Interfaces

The following interfaces make up the entirety of the ACE system:

- [Alerting](alerting.md)
- [Analysis Tracking](analysis_tracking.md)
- [Caching](caching.md)
- Configuration
- Events
- [Locking](locking.md)
- [Analysis Module Tracking](analysis_module_tracking.md)
- Observables
- [Analysis Request Tracking](analysis_request_tracking.md)
- [Storage](storage.md)
- [Work Queues](work_queue.md)

## Process Workflow

### Overview

The following is a basic high level overview of the fundamental logic of the analysis system:

1. Register one or more analysis modules.
2. Submit a new analysis request.
3. New analysis requests are added to the work queues based on the content of the submission.
4. Analysis modules pull requests from the work queues.
5. Analysis modules post results of the analysis.
6. New analysis requests are added to the work queues based on the content of the posted results.
7. Process continues until work queues are emptied.

### Analysis Module Registration

The process begins by registering one or more [analysis modules](../design/analysis_module.md). A module registration informs the system what type of data the module is interested in analyzing. A registered analysis module is registered under a *type name* and each analysis module *type* is assigned its own [work queue](work_queue.md) that receives analysis requests specific to that module *type*.

This part of the process is external to the core system.

### Analysis Request Submission

Work is initiated by submitting a [root analysis request](analysis_requests.md#root-analysis-request) to the system. An initial request supplies the [root analysis](../design/root_analysis.md) object along with any [observables](../design/observable.md) that should be analyzed by the system.

### Analysis Request Processing

The ACE core system processes inbound analysis requests by enumerating all [observables](../design/observable.md) in the [root analysis](../design/root_analysis.md) object and cross-referencing that with all registered [analysis modules](../design/analysis_module.md).

An observable is assigned to a module for analysis by creating a new [observable analysis request](analysis_requests.md#observable-analysis-request) and appending that request to the [work queue](work_queue.md) assigned to that analysis module type.

Analysis modules then receive the request by acquiring the next work item from their assigned [work queues](work_queue.md).

### Analysis Module Execution

Each [analysis module](../design/analysis_module.md) receives [observable analysis requests](analysis_requests.md#observable-analysis-request) through the [work queue](work_queue.md) which is assigned to the analysis module *type*. The execution of the analysis module logic is external to the core engine.

### Analysis Result Processing

The results of the analysis are posted back to the ACE core system as [observable analysis results](analysis_requests.md#observable-analysis-result). These results contain the original request as well as the result of the analysis.

The ACE core system applies any changes generated by the analysis back to the [root analysis](../design/root_analysis.md) object. Any new [observables](../design/observable.md) found in the results generate new [analysis requests](analysis_requests.md) if they have not yet been analyzed.

This recursion continues until all observables have been analyzed by all registered analysis modules.

### Alerting

At any point during processing any [root analysis](../design/root_analysis.md) that has one or more [detection points](../design/detection_points.md) is automatically passed to the [alert](alerting.md) interface for processing.
